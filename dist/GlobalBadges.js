function T(e,n,a){window.enmity.settings.set(e,n,a)}function E(e,n,a){return window.enmity.settings.get(e,n,a)}const{components:t}=window.enmity;t.Alert,t.Button,t.FlatList;const N=t.Image;t.ImageBackground,t.KeyboardAvoidingView,t.Modal,t.Pressable,t.RefreshControl;const O=t.ScrollView;t.SectionList,t.StatusBar,t.StyleSheet,t.Switch;const y=t.Text;t.TextInput,t.TouchableHighlight;const H=t.TouchableOpacity;t.TouchableWithoutFeedback,t.Touchable;const b=t.View;t.VirtualizedList,t.Form,t.FormArrow,t.FormCTA,t.FormCTAButton,t.FormCardSection,t.FormCheckbox,t.FormDivider,t.FormHint,t.FormIcon,t.FormInput,t.FormLabel,t.FormRadio;const r=t.FormRow,F=t.FormSection;t.FormSelect,t.FormSubLabel;const g=t.FormSwitch;t.FormTernaryCheckBox,t.FormText,t.FormTextColors,t.FormTextSizes;function Y(e){window.enmity.plugins.registerPlugin(e)}function j(...e){return window.enmity.modules.getByProps(...e)}function z(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;const w=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const o=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const G=window.enmity.modules.common.Toasts,v=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const K=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const W=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function X(e){return window.enmity.patcher.create(e)}var m="GlobalBadges",s="1.1.4",q="Adds global badges from other client mods",A=[{name:"HypedDomi",id:"354191516979429376"}],J="#E54B4B",x="https://raw.githubusercontent.com/HypedDomi/Enmity-Stuff/main/dist/GlobalBadges.js",$="https://github.com/HypedDomi/Enmity-Stuff/tree/main/GlobalBadges",C=["Added Setting to disable specific badges"],c={name:m,version:s,description:q,authors:A,color:J,rawUrl:x,sourceUrl:$,changelog:C};const{native:f}=window.enmity;function Q(){f.reload()}f.version,f.build,f.device,f.version;async function _(){let e=(await(await fetch(`${x}?${Math.random()}`)).text()).match(/\d\.\d\.\d+/g);if(!(e!=null&&e.length))return!1;e=e[0].replace('"',""),e=e.split(".").map(a=>parseInt(a));const n=s.split(".").map(a=>parseInt(a));return e[0]>n[0]||e[0]==n[0]&&e[1]>n[1]?!0:e[0]==n[0]&&e[1]==n[1]&&e[2]>n[2]}const Z=e=>{let n=[];fetch(e).then(a=>a.text()).then(a=>n=a.match(/\d\.\d\.\d+/g)),window.enmity.plugins.installPlugin(e,({data:a})=>{a=="installed_plugin"||a=="overridden_plugin"?v.show({title:`Updated ${m}`,body:`Successfully updated to version **${n!=null&&n.length?n[0]:s}**. Would you like to reload Discord now?`,confirmText:"Reload",cancelText:"Later",onConfirm:()=>Q()}):console.log(`[${m}] Plugin failed to update to version ${s}`)})};function U(){v.show({title:"Plugin Updater",body:`**${m}** has an update. Do you want to update now?`,confirmText:"Update",cancelText:"No",onConfirm:()=>{T(m,"_didUpdate",!0),Z(`${x}?${Math.random()}`)}})}function V(){!C.length||v.show({title:`${m} - v${s}`,body:`- ${C.join(`
- `)}`,confirmText:"OK",onConfirm:()=>T(m,"_changelog",s)})}const P=j("transitionToGuild");var ee=({settings:e})=>{const n=W.createThemedStyleSheet({item:{color:w.ThemeColorMap.TEXT_MUTED},text_container:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"},main_text:{opacity:.975,letterSpacing:.25},header:{color:w.ThemeColorMap.HEADER_PRIMARY,fontFamily:w.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},sub_header:{color:w.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontSize:12.75}}),[a,u]=o.useState(),[i,h]=o.useState();return o.createElement(o.Fragment,null,o.createElement(O,{onTouchStart:l=>{u(l.nativeEvent.pageX),h(l.nativeEvent.pageY)},onTouchEnd:l=>{a-l.nativeEvent.pageX<-100&&i-l.nativeEvent.pageY<40&&i-l.nativeEvent.pageY>-40&&K.pop()}},o.createElement(b,null,o.createElement(b,{style:n.text_container},o.createElement(y,{style:[n.main_text,n.header]},m),o.createElement(b,{style:{flexDirection:"row"}},o.createElement(y,{style:[n.main_text,n.sub_header]},"Author:"),o.createElement(y,{style:[n.main_text,n.sub_header,{paddingLeft:4,fontFamily:w.Fonts.DISPLAY_BOLD}]},` ${A.map(l=>l.name).join(", ")}`)),o.createElement(b,{style:{flexDirection:"row"}},o.createElement(y,{style:[n.main_text,n.sub_header]},"Version:"),o.createElement(y,{style:[n.main_text,n.sub_header,{paddingLeft:4,fontFamily:w.Fonts.DISPLAY_BOLD}]},` ${s}`)))),o.createElement(F,{title:"Badges"},o.createElement(r,{label:"Aliucord",subLabel:"Show Aliucord Badges",trailing:o.createElement(g,{value:e.getBoolean("showAliucord",!0),onValueChange:()=>e.toggle("showAliucord",!0)})}),o.createElement(r,{label:"BetterDiscord",subLabel:"Show BetterDiscord Badges",trailing:o.createElement(g,{value:e.getBoolean("showBetterDiscord",!0),onValueChange:()=>e.toggle("showBetterDiscord",!0)})}),o.createElement(r,{label:"Replugged",subLabel:"Show Replugged Badges",trailing:o.createElement(g,{value:e.getBoolean("showReplugged",!0),onValueChange:()=>e.toggle("showReplugged",!0)})}),o.createElement(r,{label:"Velocity",subLabel:"Show Velocity Badges",trailing:o.createElement(g,{value:e.getBoolean("showVelocity",!0),onValueChange:()=>e.toggle("showVelocity",!0)})}),o.createElement(r,{label:"Vencord",subLabel:"Show Vencord Badges",trailing:o.createElement(g,{value:e.getBoolean("showVencord",!0),onValueChange:()=>e.toggle("showVencord",!0)})})),o.createElement(F,{title:"Updates"},o.createElement(r,{label:"Check for Updates on startup",subLabel:"Checks automatically for updates when starting the Plugin",trailing:o.createElement(g,{value:e.getBoolean("autoUpdateCheck",!0),onValueChange:()=>e.toggle("autoUpdateCheck",!0)})}),o.createElement(r,{label:"Check for Updates",trailing:r.Arrow,onPress:()=>{_().then(l=>{l?U():v.show({title:"Plugin Updater",body:`**${m}** is already on the latest version (**${s}**)`,confirmText:"OK"})})}}),o.createElement(r,{label:"Show Changelog",subLabel:`Shows the changelog for v${s}`,trailing:r.Arrow,onPress:()=>V(),disabled:!C.length})),o.createElement(F,{title:"Source"},o.createElement(r,{label:"Source",subLabel:`See the Source Code for ${m}`,trailing:r.Arrow,onPress:()=>P==null?void 0:P.openURL($)}))))};const R="https://clientmodbadges-api.herokuapp.com/",B=new Map,te=1e3*60*15,oe=(e,n)=>{var a,u;!B.has(e)||((a=B.get(e))==null?void 0:a.expires)<Date.now()?fetch(`${R}users/${e}`).then(i=>i.json()).then(i=>{B.set(e,{badges:i,expires:Date.now()+te}),n(i)}):n((u=B.get(e))==null?void 0:u.badges)},ne=({name:e,img:n})=>{const a={wrapper:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},image:{width:24,height:24,resizeMode:"contain",marginHorizontal:2}};return o.createElement(b,{style:a.wrapper},o.createElement(H,{onPress:()=>G.open({content:e,source:{uri:n}})},o.createElement(N,{style:a.image,source:{uri:n}})))},k=X(c.name),ae={...c,onStart(){E(c.name,"_didUpdate",!1)||(E(c.name,"autoUpdateCheck",!0)&&_().then(n=>{n&&U()}),E(c.name,"_changelog",c.version)!==c.version&&V()),T(c.name,"_didUpdate",!1);const e=z("ProfileBadges",{all:!0,default:!1});for(const n of e)k.after(n,"default",(a,[{user:{id:u}}],i)=>{const[h,l]=o.useState({});o.useEffect(()=>oe(u,l),[]);const S=[];if(!h||(Object.keys(h).forEach(d=>{d.toLowerCase()==="enmity"||!E(c.name,`show${d}`,!0)||h[d].forEach(p=>{const I=`${R}badges/${d}/${p.replace(d,"").trim().split(" ")[0]}`,D={hunter:"Bug Hunter",early:"Early User"};D[p]&&(p=D[p]);const L=p.replace(d,"").trim(),M=`${d} ${L.charAt(0).toUpperCase()+L.slice(1)}`;S.push(o.createElement(ne,{name:M,img:I}))})}),!S.length))return i;i.props.badges?i.props.badges.push(...S):i.props.children.push(...S)})},onStop(){k.unpatchAll()},getSettingsPanel({settings:e}){return o.createElement(ee,{settings:e})}};Y(ae);
