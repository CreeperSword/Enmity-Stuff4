function k(t){window.enmity.plugins.registerPlugin(t)}function I(t){return window.enmity.patcher.create(t)}const w=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const M=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const y=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const B=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const N=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function f(t,o,a){window.enmity.settings.set(t,o,a)}function T(t,o,a){return window.enmity.settings.get(t,o,a)}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl;const V=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const p=e.Text;e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const S=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const d=e.FormRow,C=e.FormSection;e.FormSelect,e.FormSubLabel;const O=e.FormSwitch;e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;var r="ReplaceTimestamps",l="1.1.5",Y="Replaces plaintext 24 hour timestamps into Discord's timestamps",$=[{name:"HypedDomi",id:"354191516979429376"}],H="#E54B4B",E="https://raw.githubusercontent.com/HypedDomi/Enmity-Stuff/main/dist/ReplaceTimestamps.js",x="https://github.com/HypedDomi/Enmity-Stuff/tree/main/ReplaceTimestamps",D=["Improved REGEX again (Thanks to King Fish#9176)","Improved Plugin Updater (Thanks to acquite#0001)"],u={name:r,version:l,description:Y,authors:$,color:H,rawUrl:E,sourceUrl:x,changelog:D};function z(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;const{native:g}=window.enmity;function K(){g.reload()}g.version,g.build,g.device,g.version;async function L(){let t=(await(await fetch(`${E}?${Math.random()}`)).text()).match(/[0-9].[0-9].[0-9]/g);if(!(t!=null&&t.length))return!1;t=t[0].replace('"',""),t=t.split(".").map(a=>parseInt(a));const o=l.split(".").map(a=>parseInt(a));return t[0]>o[0]||t[0]==o[0]&&t[1]>o[1]?!0:t[0]==o[0]&&t[1]==o[1]&&t[2]>o[2]}const X=t=>{window.enmity.plugins.installPlugin(t,({data:o})=>{o=="installed-plugin"||o=="overriden-plugin"?y.show({title:`Updated ${r}`,body:`Successfully updated to version ${l}. Would you like to reload Discord now?`,confirmText:"Reload",cancelText:"Later",onConfirm:()=>K()}):console.log(`[${r}] Plugin failed to update to version ${l}.`)})};function _(){y.show({title:"Plugin Updater",body:`**${r}** has an update. Do you want to update now?`,confirmText:"Update",cancelText:"No",onConfirm:()=>{f(r,"_didUpdate",!0),X(`${E}?${Math.random()}`)}})}function U(){y.show({title:`${r} - v${l}`,body:`- ${D.join(`
- `)}`,confirmText:"OK",onConfirm:()=>f(r,"_changelog",l)})}const R=z("transitionToGuild");var j=({settings:t})=>{const o=N.createThemedStyleSheet({item:{color:w.ThemeColorMap.TEXT_MUTED},text_container:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"},main_text:{opacity:.975,letterSpacing:.25},header:{color:w.ThemeColorMap.HEADER_PRIMARY,fontFamily:w.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},sub_header:{color:w.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontSize:12.75}}),[a,s]=n.useState(),[h,m]=n.useState();return n.createElement(n.Fragment,null,n.createElement(V,{onTouchStart:i=>{s(i.nativeEvent.pageX),m(i.nativeEvent.pageY)},onTouchEnd:i=>{a-i.nativeEvent.pageX<-100&&h-i.nativeEvent.pageY<40&&h-i.nativeEvent.pageY>-40&&B.pop()}},n.createElement(S,null,n.createElement(S,{style:o.text_container},n.createElement(p,{style:[o.main_text,o.header]},r),n.createElement(S,{style:{flexDirection:"row"}},n.createElement(p,{style:[o.main_text,o.sub_header]},"Author:"),n.createElement(p,{style:[o.main_text,o.sub_header,{paddingLeft:4,fontFamily:w.Fonts.DISPLAY_BOLD}]},` ${$.map(i=>i.name).join(", ")}`)),n.createElement(S,{style:{flexDirection:"row"}},n.createElement(p,{style:[o.main_text,o.sub_header]},"Version:"),n.createElement(p,{style:[o.main_text,o.sub_header,{paddingLeft:4,fontFamily:w.Fonts.DISPLAY_BOLD}]},` ${l}`)))),n.createElement(C,{title:"Updates"},n.createElement(d,{label:"Check for Updates on startup",subLabel:"Checks automatically for updates when starting the Plugin",trailing:n.createElement(O,{value:t.getBoolean("autoUpdateCheck",!0),onValueChange:()=>t.toggle("autoUpdateCheck",!0)})}),n.createElement(d,{label:"Check for Updates",trailing:d.Arrow,onPress:()=>{L().then(i=>{i?_():y.show({title:"Plugin Updater",body:`**${r}** is already on the latest version (**${l}**)`,confirmText:"OK"})})}}),n.createElement(d,{label:"Show Changelog",subLabel:`Shows the changelog for v${l}`,trailing:d.Arrow,onPress:()=>U()})),n.createElement(C,{title:"Source"},n.createElement(d,{label:"Source",subLabel:`See the Source Code for ${r}`,trailing:d.Arrow,onPress:()=>R==null?void 0:R.openURL(x)}))))};const P=I("ReplaceTimestamps"),G={...u,onStart(){T(u.name,"_didUpdate",!1)||(T(u.name,"autoUpdateCheck",!0)&&L().then(o=>{o&&_()}),T(u.name,"_changelog",u.version)!==u.version&&U()),f(u.name,"_didUpdate",!1);const t=o=>{const a=new Date().toISOString().replace(/T/," ").replace(/\..+/,"").replace(/\d?\d:\d\d/,o),s=Math.round(new Date(a).getTime()/1e3);return isNaN(s)?o:`<t:${s}:t>`};P.before(M,"sendMessage",(o,[,a])=>{let s=/(?:^| )(?:([0-2]?[1-9]):([0-5][0-9])(?: ?([ap]m?))?|([0-2]?[1-9])(?: ?([ap]m?)))(?:$| )/gim;a.content.search(s)!==-1&&(a.content=a.content.replace(s,h=>{s=/(?:^| )(?:([0-2]?[1-9]):([0-5][0-9])(?: ?([ap]m?))?|([0-2]?[1-9])(?: ?([ap]m?)))(?:$| )/gim;let[,m,i,c,b,F]=s.exec(h);console.log(`[ReplaceTimestamps] ${m}, ${i}, ${c}, ${b}, ${F}`),[m,i]=[m||b,i||"00"].map(A=>parseInt(A));let v=`${m}:${i}`;return c=c||F,c&&c.toLowerCase()==="pm"&&m<12&&m!==0?(m+=12,i=i.toString().padStart(2,"0"),v=`${m}:${i}`):(c&&c.toLowerCase()==="am"&&m===12||m===24)&&(v=`00:${i}`),t(v)}))})},onStop(){P.unpatchAll()},getSettingsPanel({settings:t}){return n.createElement(j,{settings:t})}};k(G);
