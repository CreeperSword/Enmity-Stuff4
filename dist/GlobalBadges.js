const g=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage;const I=window.enmity.modules.common.Toasts,x=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const O=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const j=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function Y(e){return window.enmity.patcher.create(e)}function F(e,t,i){window.enmity.settings.set(e,t,i)}function v(e,t,i){return window.enmity.settings.get(e,t,i)}function z(...e){return window.enmity.modules.getByProps(...e)}function G(...e){return window.enmity.modules.getByName(...e)}window.enmity.modules.common;const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList;const W=o.Image;o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const K=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch;const w=o.Text;o.TextInput,o.TouchableHighlight;const X=o.TouchableOpacity;o.TouchableWithoutFeedback,o.Touchable;const p=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel,o.FormRadio;const u=o.FormRow,U=o.FormSection;o.FormSelect,o.FormSubLabel;const T=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;function J(e){window.enmity.plugins.registerPlugin(e)}var _="GlobalBadges",B="1.2.5",q="Adds global badges from other client mods",A=[{name:"HypedDomi",id:"354191516979429376"}],Q="#E54B4B",Z="https://raw.githubusercontent.com/HypedDomi/Enmity-Stuff/main/dist/GlobalBadges.js",k="https://github.com/HypedDomi/Enmity-Stuff/tree/main/GlobalBadges",R=["Improved Updater","Fixed Replugged Bug Hunter Badge"],V="294f9b3e45e73daf567f1300f16878af08dc1f2f",b={name:_,version:B,description:q,authors:A,color:Q,rawUrl:Z,sourceUrl:k,changelog:R,hash:V};const{native:S}=window.enmity;function ee(){S.reload()}S.version,S.build,S.device,S.version;const D={name:"",version:"",rawUrl:"",changelog:[""],hash:"",remoteHash:null,remoteVersion:null,remoteChangelog:[""],create({name:e,version:t,rawUrl:i,changelog:a,hash:r}){if(!e||!t||!i||!a||!r)return console.error(`[${e||__filename}] Missing parameters in constructor`);this.name=e,this.version=t,this.rawUrl=i,this.changelog=a,this.hash=r,v(e,"_didUpdate",!1)||(v(e,"_changelog",t)!==t&&this.showChangelog(),v(e,"autoUpdateCheck",!0)&&this.checkForUpdates()),F(e,"_didUpdate",!1)},showChangelog(){!this.changelog||x.show({title:`${this.name} - v${this.version}`,body:`- ${this.changelog.join(`
- `)}`,confirmText:"OK",onConfirm:()=>F(this.name,"_changelog",this.version)})},async checkForUpdates(e=!1){var t,i,a,r,h,l;const m=await(await fetch(`${this.rawUrl}?${Math.random()}`)).text(),c=(t=m.match(/hash:(\w+)/))==null?void 0:t[1],s=(i=m.match(new RegExp(`${c}="([^,"]+)"`)))==null?void 0:i[1];s?this.remoteHash=s!=null?s:"0AB1C2":console.warn(`[${this.name}] Failed to fetch remote hash`);const E=(a=m.match(/version:(\w+)/))==null?void 0:a[1],C=(r=m.match(new RegExp(`${E}="([^,"]+)"`)))==null?void 0:r[1];C?this.remoteVersion=C:console.warn(`[${this.name}] Failed to fetch remote version`);const y=(h=m.match(/changelog:(\w+)/))==null?void 0:h[1],P=(l=m.match(new RegExp(`${y}=\\[(.*?)\\]`)))==null?void 0:l[0];if(P?this.remoteChangelog=JSON.parse(P.replace(`${y}=`,"")):console.warn(`[${this.name}] Failed to fetch remote changelog`),this.remoteHash&&this.remoteVersion){const f=this.version.split(".").map(Number),$=this.remoteVersion.split(".").map(Number);for(let d=0;d<f.length;d++){if(console.log(`[${this.name}] Checking version: ${$[d]} > ${f[d]} ${$[d]>f[d]}`),$[d]>f[d])return this.showUpdateDialog({version:this.remoteVersion,changelog:this.remoteChangelog});if($[d]<f[d])return console.log(`[${this.name}] Remote version is older than local version`)}if(this.remoteHash!==this.hash)return this.showUpdateDialog({hash:this.remoteHash})}!e||x.show({title:"Plugin Updater",body:`No update available for ${this.name}`,confirmText:"OK"})},showUpdateDialog({version:e,hash:t,changelog:i}){if(console.log(`[${this.name}] Showing update dialog`),!e&&!t)return console.error(`[${this.name}] Missing parameters in showUpdateDialog()`);let a="";e?a=`New Version for ${this.name} is available!`:a=`New Build for ${this.name} is available!`,a+=`
Would you like to update now?`,i&&(a+=`

Changelog:
- ${i.join(`
- `)}`),x.show({title:"Plugin Updater",body:a,confirmText:"Update",cancelText:"No",onConfirm:()=>{F(this.name,"_didUpdate",!0),this.installPlugin(!!t)}})},installPlugin(e=!1){var t;const i=e?"updated Build":"updated Version",a=e?`\`${(t=this.remoteHash)==null?void 0:t.slice(0,7)}\``:this.remoteVersion;window.enmity.plugins.installPlugin(`${this.rawUrl}?${Math.random()}`,({data:r})=>{r==="installed_plugin"||r==="overridden_plugin"?x.show({title:`Installed ${this.name} v${this.remoteVersion}`,body:`Successfully ${i} to **${a}**.
Would you like to reload Discord now?`,confirmText:"Reload",cancelText:"Later",onConfirm:ee}):console.error(`[${this.name}] Failed to install v${a}`)})}},H=z("transitionToGuild","openURL");D.create(b);var te=({settings:e})=>{const t=j.createThemedStyleSheet({item:{color:g.ThemeColorMap.TEXT_MUTED},text_container:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"},main_text:{opacity:.975,letterSpacing:.25},header:{color:g.ThemeColorMap.HEADER_PRIMARY,fontFamily:g.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},sub_header:{color:g.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontSize:12.75}}),[i,a]=n.useState(),[r,h]=n.useState();return n.createElement(n.Fragment,null,n.createElement(K,{onTouchStart:l=>{a(l.nativeEvent.pageX),h(l.nativeEvent.pageY)},onTouchEnd:l=>{i-l.nativeEvent.pageX<-100&&r-l.nativeEvent.pageY<40&&r-l.nativeEvent.pageY>-40&&O.pop()}},n.createElement(p,null,n.createElement(p,{style:t.text_container},n.createElement(w,{style:[t.main_text,t.header]},_),n.createElement(p,{style:{flexDirection:"row"}},n.createElement(w,{style:[t.main_text,t.sub_header]},"Author:"),n.createElement(w,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:g.Fonts.DISPLAY_BOLD}]},` ${A.map(l=>l.name).join(", ")}`)),n.createElement(p,{style:{flexDirection:"row"}},n.createElement(w,{style:[t.main_text,t.sub_header]},"Version:"),n.createElement(w,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:g.Fonts.DISPLAY_BOLD}]},` ${B}`)),n.createElement(p,{style:{flexDirection:"row"}},n.createElement(w,{style:[t.main_text,t.sub_header]},"Hash:"),n.createElement(w,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:g.Fonts.DISPLAY_BOLD}]},` ${V.slice(0,7)}`)))),n.createElement(U,{title:"Badges"},n.createElement(u,{label:"Prefix",subLabel:"Shows the Mod as Prefix",trailing:n.createElement(T,{value:e.getBoolean("showPrefix",!0),onValueChange:()=>e.toggle("showPrefix",!0)})}),n.createElement(u,{label:"Custom Badges",subLabel:"Show Custom Badges",trailing:n.createElement(T,{value:e.getBoolean("showCustom",!0),onValueChange:()=>e.toggle("showCustom",!0)})})),n.createElement(U,{title:"Updates"},n.createElement(u,{label:"Check for Updates on startup",subLabel:"Checks automatically for updates when starting the Plugin",trailing:n.createElement(T,{value:e.getBoolean("autoUpdateCheck",!0),onValueChange:()=>e.toggle("autoUpdateCheck",!0)})}),n.createElement(u,{label:"Check for Updates",trailing:u.Arrow,onPress:()=>D.checkForUpdates(!0)}),n.createElement(u,{label:"Show Changelog",subLabel:`Shows the changelog for v${B}`,trailing:u.Arrow,onPress:()=>D.showChangelog(),disabled:!R.length})),n.createElement(U,{title:"Source"},n.createElement(u,{label:"Source",subLabel:`See the Source Code for ${_}`,trailing:u.Arrow,onPress:()=>H==null?void 0:H.openURL(k)}))))};const M="https://clientmodbadges-api.herokuapp.com/",L=new Map,oe=1e3*60*15,ne=e=>{const t=L.get(e);if(!L.has(e)||t&&t.expires<Date.now())fetch(`${M}users/${e}`).then(i=>i.json()).then(i=>(L.set(e,{badges:i,expires:Date.now()+oe}),i));else if(t)return t.badges},ie=({name:e,img:t})=>{const i={wrapper:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"},image:{width:24,height:24,resizeMode:"contain",marginHorizontal:2}};return n.createElement(p,{style:i.wrapper},n.createElement(X,{onPress:()=>I.open({content:e,source:{uri:t}})},n.createElement(W,{style:i.image,source:{uri:t}})))},N=Y(b.name),ae={...b,onStart(){const e=G("ProfileBadges",{all:!0,default:!1});for(const t of e)N.after(t,"default",(i,[{user:{id:a}}],r)=>{const[h,l]=n.useState({});if(n.useEffect(()=>{var c;return l((c=ne(a))!=null?c:{})},[]),!h)return null;const m=[];if(!h||(Object.keys(h).forEach(c=>{c.toLowerCase()!=="enmity"&&h[c].forEach(s=>{if(typeof s=="string"){const y={hunter:"Bug Hunter",early:"Early User"};s={name:y[s]?y[s]:s,badge:`${M}badges/${c}/${s.replace(c,"").trim().split(" ")[0]}`}}else typeof s=="object"&&(s.custom=!0);if(!v(b.name,"showCustom",!0)&&s.custom)return;const E=s.name.replace(c,"").trim(),C=v(b.name,"showPrefix",!0)?c:"";s.custom||(s.name=`${C} ${E.charAt(0).toUpperCase()+E.slice(1)}`),m.push(n.createElement(ie,{name:s.name,img:s.badge}))})}),!m.length))return r;r.props.badges?r.props.badges.push(...m):r.props.children.push(...m)})},onStop(){N.unpatchAll()},getSettingsPanel({settings:e}){return n.createElement(te,{settings:e})}};J(ae);
