var $="SuppressEmbeds",x="1.1.0",O="Allows you to Suppress/Unsuppress Embeds",N=[{name:"HypedDomi",id:"354191516979429376"}],Y="#E54B4B",z="https://raw.githubusercontent.com/domi-btnr/Enmity-Stuff/main/dist/SuppressEmbeds.js",R="https://github.com/domi-btnr/Enmity-Stuff/tree/main/SuppressEmbeds",B=["Fixed Button not showing up in the Message Action Sheet (Big thanks to [@aeong.one](https://github.com/aeongdesu/) )"],I="249052181555b002894e3d1ec5c9129d040feb96",F={name:$,version:x,description:O,authors:N,color:Y,rawUrl:z,sourceUrl:R,changelog:B,hash:I};function M(e){return window.enmity.assets.getIDByName(e)}const{components:o}=window.enmity;o.Alert,o.Button,o.FlatList,o.Image,o.ImageBackground,o.KeyboardAvoidingView,o.Modal,o.Pressable,o.RefreshControl;const j=o.ScrollView;o.SectionList,o.StatusBar,o.StyleSheet,o.Switch;const p=o.Text;o.TextInput,o.TouchableHighlight,o.TouchableOpacity,o.TouchableWithoutFeedback,o.Touchable;const v=o.View;o.VirtualizedList,o.Form,o.FormArrow,o.FormCTA,o.FormCTAButton,o.FormCardSection,o.FormCheckbox,o.FormDivider,o.FormHint,o.FormIcon,o.FormInput,o.FormLabel,o.FormRadio;const m=o.FormRow,V=o.FormSection;o.FormSelect,o.FormSubLabel;const K=o.FormSwitch;o.FormTernaryCheckBox,o.FormText,o.FormTextColors,o.FormTextSizes;function W(e){window.enmity.plugins.registerPlugin(e)}const U={byProps:(...e)=>window.enmity.modules.filters.byProps(...e),byName:(e,t)=>window.enmity.modules.filters.byName(e,t),byTypeName:(e,t)=>window.enmity.modules.filters.byTypeName(e,t),byDisplayName:(e,t)=>window.enmity.modules.filters.byDisplayName(e,t)};function G(...e){return window.enmity.modules.bulk(...e)}window.enmity.modules.common;const w=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets,window.enmity.modules.common.Messages,window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const C=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token;const X=window.enmity.modules.common.REST;window.enmity.modules.common.Settings;const J=window.enmity.modules.common.Users,q=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme;const Q=window.enmity.modules.common.Linking,Z=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components;const ee=window.enmity.modules.common.Locale;window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function te(e){return window.enmity.patcher.create(e)}function oe(e,t,s){return window.enmity.utilities.findInReactTree(e,t,s)}const{native:b}=window.enmity;function ne(){b.reload()}b.version,b.build,b.device,b.version;function D(e,t,s){window.enmity.settings.set(e,t,s)}function L(e,t,s){return window.enmity.settings.get(e,t,s)}const P={name:"",version:"",rawUrl:"",changelog:[""],hash:"",remoteHash:null,remoteVersion:null,remoteChangelog:[""],create({name:e,version:t,rawUrl:s,changelog:a,hash:i}){if(!e||!t||!s||!a||!i)return console.error(`[${e||__filename}] Missing parameters in constructor`);this.name=e,this.version=t,this.rawUrl=s,this.changelog=a,this.hash=i,L(e,"_didUpdate",!1)||(L(e,"_changelog",t)!==t&&this.showChangelog(),L(e,"autoUpdateCheck",!0)&&this.hash!=="DEBUG"&&this.checkForUpdates()),D(e,"_didUpdate",!1)},showChangelog(){!this.changelog||C.show({title:`${this.name} - v${this.version}`,body:`- ${this.changelog.join(`
- `)}`,confirmText:"OK",onConfirm:()=>D(this.name,"_changelog",this.version)})},async checkForUpdates(e=!1){var t,s,a,i,y,r;const _=await fetch(`${this.rawUrl}?${Math.random()}`);if(!_.ok)return console.error(`[${this.name}] Failed to fetch remote version`);const g=await _.text(),S=(t=g.match(/hash:(\w+)/))==null?void 0:t[1],c=(s=g.match(new RegExp(`${S}="([^,"]+)"`)))==null?void 0:s[1];c?this.remoteHash=c!=null?c:"0AB1C2":console.warn(`[${this.name}] Failed to fetch remote hash`);const T=(a=g.match(/version:(\w+)/))==null?void 0:a[1],d=(i=g.match(new RegExp(`${T}="([^,"]+)"`)))==null?void 0:i[1];d?this.remoteVersion=d!=null?d:"0.0.0":console.warn(`[${this.name}] Failed to fetch remote version`);const E=(y=g.match(/changelog:(\w+)/))==null?void 0:y[1],f=(r=g.match(new RegExp(`${E}=\\["(.*?)"\\]`)))==null?void 0:r[0];if(f?this.remoteChangelog=JSON.parse(f.replace(`${E}=`,"")):console.warn(`[${this.name}] Failed to fetch remote changelog`),this.remoteHash&&this.remoteVersion){const h=this.version.split(".").map(Number),u=this.remoteVersion.split(".").map(Number);for(let l=0;l<h.length;l++){if(u[l]>h[l])return this.showUpdateDialog({version:this.remoteVersion,changelog:this.remoteChangelog});if(u[l]<h[l])return console.log(`[${this.name}] Remote version is older than local version`)}if(this.remoteHash!==this.hash)return this.showUpdateDialog({hash:this.remoteHash})}!e||C.show({title:"Plugin Updater",body:`No update available for ${this.name}`,confirmText:"OK"})},showUpdateDialog({version:e,hash:t,changelog:s}){if(!e&&!t)return console.error(`[${this.name}] Missing parameters in showUpdateDialog()`);let a="";e?a=`New Version for ${this.name} is available!`:a=`New Build for ${this.name} is available!`,a+=`
Would you like to update now?`,s&&(a+=`

Changelog:
- ${s.join(`
- `)}`),C.show({title:"Plugin Updater",body:a,confirmText:"Update",cancelText:"No",onConfirm:()=>{D(this.name,"_didUpdate",!0),this.installPlugin(!!t)}})},installPlugin(e=!1){var t;const s=e?"updated Build":"updated Version",a=e?`\`${(t=this.remoteHash)==null?void 0:t.slice(0,7)}\``:this.remoteVersion;window.enmity.plugins.installPlugin(`${this.rawUrl}?${Math.random()}`,({data:i})=>{i==="installed_plugin"||i==="overridden_plugin"?C.show({title:`Installed ${this.name} v${this.remoteVersion}`,body:`Successfully ${s} to **${a}**.
Would you like to reload Discord now?`,confirmText:"Reload",cancelText:"Later",onConfirm:ne}):console.error(`[${this.name}] Failed to install v${a}`)})}};P.create(F);var ie=({settings:e})=>{const t=Z.createThemedStyleSheet({item:{color:w.ThemeColorMap.TEXT_MUTED},text_container:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"},main_text:{opacity:.975,letterSpacing:.25},header:{color:w.ThemeColorMap.HEADER_PRIMARY,fontFamily:w.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},sub_header:{color:w.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontSize:12.75}}),[s,a]=n.useState(),[i,y]=n.useState();return n.createElement(n.Fragment,null,n.createElement(j,{onTouchStart:r=>{a(r.nativeEvent.pageX),y(r.nativeEvent.pageY)},onTouchEnd:r=>{s-r.nativeEvent.pageX<-100&&i-r.nativeEvent.pageY<40&&i-r.nativeEvent.pageY>-40&&q.pop()}},n.createElement(v,null,n.createElement(v,{style:t.text_container},n.createElement(p,{style:[t.main_text,t.header]},$),n.createElement(v,{style:{flexDirection:"row"}},n.createElement(p,{style:[t.main_text,t.sub_header]},"Author:"),n.createElement(p,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:w.Fonts.DISPLAY_BOLD}]},` ${N.map(r=>r.name).join(", ")}`)),n.createElement(v,{style:{flexDirection:"row"}},n.createElement(p,{style:[t.main_text,t.sub_header]},"Version:"),n.createElement(p,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:w.Fonts.DISPLAY_BOLD}]},` ${x}`)),n.createElement(v,{style:{flexDirection:"row"}},n.createElement(p,{style:[t.main_text,t.sub_header]},"Hash:"),n.createElement(p,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:w.Fonts.DISPLAY_BOLD}]},` ${I.slice(0,7)}`)))),n.createElement(V,{title:"Updates"},n.createElement(m,{label:"Check for Updates on startup",subLabel:"Checks automatically for updates when starting the Plugin",trailing:n.createElement(K,{value:e.getBoolean("autoUpdateCheck",!0),onValueChange:()=>e.toggle("autoUpdateCheck",!0)})}),n.createElement(m,{label:"Check for Updates",trailing:m.Arrow,onPress:()=>P.checkForUpdates(!0)}),n.createElement(m,{label:"Show Changelog",subLabel:`Shows the changelog for v${x}`,trailing:m.Arrow,onPress:()=>P.showChangelog(),disabled:!B.length})),n.createElement(V,{title:"Source"},n.createElement(m,{label:"Source",subLabel:`See the Source Code for ${$}`,trailing:m.Arrow,onPress:()=>Q.openURL(R)}))))};const A=1<<2,[se,H,ae]=G(U.byProps("getChannel"),U.byProps("openLazy","hideActionSheet"),U.byProps("getChannelPermissions")),k=te(F.name),re={...F,onStart(){k.before(H,"openLazy",(e,[t,s,a])=>{const i=a==null?void 0:a.message;s!=="MessageLongPressActionSheet"||!i||t.then(y=>{const r=k.after(y,"default",(_,g,S)=>{n.useEffect(()=>()=>{r()},[]);const c=oe(S,h=>{var u,l;return((l=(u=h==null?void 0:h[0])==null?void 0:u.type)==null?void 0:l.name)==="ButtonRow"});if(!c)return S;const T=se.getChannel(i.channel_id),d=!!(i.flags&A),E=!!(ae.getChannelPermissions({id:i.channel_id})&w.Permissions.EMBED_LINKS);if(!d&&!i.embeds.length||i.author.id===J.getCurrentUser().id&&!E)return;const f=c==null?void 0:c.findIndex(h=>{var u;return((u=h.props)==null?void 0:u.message)===ee.Messages.DELETE_MESSAGE});f!==-1&&c.splice(f,0,n.createElement(m,{key:F.name,label:d?"Unsuppress Embeds":"Suppress Embeds",leading:n.createElement(m.Icon,{source:M(d?"ic_message_retry":"ic_close_16px")}),onPress:()=>{X.patch({url:`/channels/${T.id}/messages/${i.id}`,body:{flags:d?i.flags&~A:i.flags|A}}),H.hideActionSheet()}}))})})})},onStop(){k.unpatchAll()},getSettingsPanel({settings:e}){return n.createElement(ie,{settings:e})}};W(re);
