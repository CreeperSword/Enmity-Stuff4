function M(o){window.enmity.plugins.registerPlugin(o)}const d=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const N=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const $=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const H=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const I=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function O(o){return window.enmity.patcher.create(o)}var F="ReplaceTimestamps",E="1.2.8",Y="Replaces plaintext 24 hour timestamps into Discord's timestamps",L=[{name:"HypedDomi",id:"354191516979429376"}],j="#E54B4B",z="https://raw.githubusercontent.com/HypedDomi/Enmity-Stuff/main/dist/ReplaceTimestamps.js",P="https://github.com/HypedDomi/Enmity-Stuff/tree/main/ReplaceTimestamps",R=["Improved Pluginupdater"],A="49cbd5228a8eaa113f8f10f29774e73a44f59ba5",C={name:F,version:E,description:Y,authors:L,color:j,rawUrl:z,sourceUrl:P,changelog:R,hash:A};const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl;const W=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const h=e.Text;e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const y=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const u=e.FormRow,k=e.FormSection;e.FormSelect,e.FormSubLabel;const K=e.FormSwitch;e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;function X(...o){return window.enmity.modules.getByProps(...o)}window.enmity.modules.common;const{native:v}=window.enmity;function G(){v.reload()}v.version,v.build,v.device,v.version;function T(o,t,a){window.enmity.settings.set(o,t,a)}function x(o,t,a){return window.enmity.settings.get(o,t,a)}const U={name:"",version:"",rawUrl:"",changelog:[""],hash:"",remoteHash:null,remoteVersion:null,remoteChangelog:[""],create({name:o,version:t,rawUrl:a,changelog:i,hash:m}){if(!o||!t||!a||!i||!m)return console.error(`[${o||__filename}] Missing parameters in constructor`);this.name=o,this.version=t,this.rawUrl=a,this.changelog=i,this.hash=m,x(o,"_didUpdate",!1)||(x(o,"_changelog",t)!==t&&this.showChangelog(),x(o,"autoUpdateCheck",!0)&&this.checkForUpdates()),T(o,"_didUpdate",!1)},showChangelog(){!this.changelog||$.show({title:`${this.name} - v${this.version}`,body:`- ${this.changelog.join(`
- `)}`,confirmText:"OK",onConfirm:()=>T(this.name,"_changelog",this.version)})},async checkForUpdates(o=!1){var t,a,i,m,r,s;const l=await(await fetch(`${this.rawUrl}?${Math.random()}`)).text(),b=(t=l.match(/hash:(\w+)/))==null?void 0:t[1],w=(a=l.match(new RegExp(`${b}="([^,"]+)"`)))==null?void 0:a[1];w?this.remoteHash=w!=null?w:"0AB1C2":console.warn(`[${this.name}] Failed to fetch remote hash`);const g=(i=l.match(/version:(\w+)/))==null?void 0:i[1],f=(m=l.match(new RegExp(`${g}="([^,"]+)"`)))==null?void 0:m[1];f?this.remoteVersion=f:console.warn(`[${this.name}] Failed to fetch remote version`);const _=(r=l.match(/changelog:(\w+)/))==null?void 0:r[1],D=(s=l.match(new RegExp(`${_}=\\[(.*?)\\]`)))==null?void 0:s[0];if(D?this.remoteChangelog=JSON.parse(D.replace(`${_}=`,"")):console.warn(`[${this.name}] Failed to fetch remote changelog`),this.remoteHash&&this.remoteVersion){const p=this.version.split(".").map(Number),S=this.remoteVersion.split(".").map(Number);for(let c=0;c<p.length;c++){if(console.log(`[${this.name}] Checking version: ${S[c]} > ${p[c]} ${S[c]>p[c]}`),S[c]>p[c])return this.showUpdateDialog({version:this.remoteVersion,changelog:this.remoteChangelog});if(S[c]<p[c])return console.log(`[${this.name}] Remote version is older than local version`)}if(this.remoteHash!==this.hash)return this.showUpdateDialog({hash:this.remoteHash})}!o||$.show({title:"Plugin Updater",body:`No update available for ${this.name}`,confirmText:"OK"})},showUpdateDialog({version:o,hash:t,changelog:a}){if(console.log(`[${this.name}] Showing update dialog`),!o&&!t)return console.error(`[${this.name}] Missing parameters in showUpdateDialog()`);let i="";o?i=`New Version for ${this.name} is available!`:i=`New Build for ${this.name} is available!`,i+=`
Would you like to update now?`,a&&(i+=`

Changelog:
- ${a.join(`
- `)}`),$.show({title:"Plugin Updater",body:i,confirmText:"Update",cancelText:"No",onConfirm:()=>{T(this.name,"_didUpdate",!0),this.installPlugin(!!t)}})},installPlugin(o=!1){var t;const a=o?"updated Build":"updated Version",i=o?`\`${(t=this.remoteHash)==null?void 0:t.slice(0,7)}\``:this.remoteVersion;window.enmity.plugins.installPlugin(`${this.rawUrl}?${Math.random()}`,({data:m})=>{m==="installed_plugin"||m==="overridden_plugin"?$.show({title:`Installed ${this.name} v${this.remoteVersion}`,body:`Successfully ${a} to **${i}**.
Would you like to reload Discord now?`,confirmText:"Reload",cancelText:"Later",onConfirm:G}):console.error(`[${this.name}] Failed to install v${i}`)})}},V=X("transitionToGuild","openURL");U.create(C);var J=({settings:o})=>{const t=I.createThemedStyleSheet({item:{color:d.ThemeColorMap.TEXT_MUTED},text_container:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"},main_text:{opacity:.975,letterSpacing:.25},header:{color:d.ThemeColorMap.HEADER_PRIMARY,fontFamily:d.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},sub_header:{color:d.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontSize:12.75}}),[a,i]=n.useState(),[m,r]=n.useState();return n.createElement(n.Fragment,null,n.createElement(W,{onTouchStart:s=>{i(s.nativeEvent.pageX),r(s.nativeEvent.pageY)},onTouchEnd:s=>{a-s.nativeEvent.pageX<-100&&m-s.nativeEvent.pageY<40&&m-s.nativeEvent.pageY>-40&&H.pop()}},n.createElement(y,null,n.createElement(y,{style:t.text_container},n.createElement(h,{style:[t.main_text,t.header]},F),n.createElement(y,{style:{flexDirection:"row"}},n.createElement(h,{style:[t.main_text,t.sub_header]},"Author:"),n.createElement(h,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:d.Fonts.DISPLAY_BOLD}]},` ${L.map(s=>s.name).join(", ")}`)),n.createElement(y,{style:{flexDirection:"row"}},n.createElement(h,{style:[t.main_text,t.sub_header]},"Version:"),n.createElement(h,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:d.Fonts.DISPLAY_BOLD}]},` ${E}`)),n.createElement(y,{style:{flexDirection:"row"}},n.createElement(h,{style:[t.main_text,t.sub_header]},"Hash:"),n.createElement(h,{style:[t.main_text,t.sub_header,{paddingLeft:4,fontFamily:d.Fonts.DISPLAY_BOLD}]},` ${A.slice(0,7)}`)))),n.createElement(k,{title:"Updates"},n.createElement(u,{label:"Check for Updates on startup",subLabel:"Checks automatically for updates when starting the Plugin",trailing:n.createElement(K,{value:o.getBoolean("autoUpdateCheck",!0),onValueChange:()=>o.toggle("autoUpdateCheck",!0)})}),n.createElement(u,{label:"Check for Updates",trailing:u.Arrow,onPress:()=>U.checkForUpdates(!0)}),n.createElement(u,{label:"Show Changelog",subLabel:`Shows the changelog for v${E}`,trailing:u.Arrow,onPress:()=>U.showChangelog(),disabled:!R.length})),n.createElement(k,{title:"Source"},n.createElement(u,{label:"Source",subLabel:`See the Source Code for ${F}`,trailing:u.Arrow,onPress:()=>V==null?void 0:V.openURL(P)}))))};const B=O(C.name),q={...C,onStart(){const o=t=>{const a=new Date().toISOString().replace(/T/," ").replace(/\..+/,"").replace(/\d?\d:\d\d/,t),i=Math.round(new Date(a).getTime()/1e3);return isNaN(i)?t:` <t:${i}:t> `};B.before(N,"sendMessage",(t,[,a])=>{let i=/(?:^| )(?:([01][0-9]|2?[0-4]):([0-5][0-9])(?: ?([ap]m?))?|([0-2]?[1-9])(?: ?([ap]m?)))(?:$| )/gim;a.content.search(i)!==-1&&(a.content=a.content.replace(i,m=>{i=/(?:^| )(?:([01][0-9]|2?[0-4]):([0-5][0-9])(?: ?([ap]m?))?|([0-2]?[1-9])(?: ?([ap]m?)))(?:$| )/gim;let[,r,s,l,b,w]=i.exec(m);[r,s]=[r||b,s||"00"].map(f=>parseInt(f));let g=`${r}:${s}`;return l=l||w,l&&l.toLowerCase()==="pm"&&r<12&&r!==0?(r+=12,s=s.toString().padStart(2,"0"),g=`${r}:${s}`):(l&&l.toLowerCase()==="am"&&r===12||r===24)&&(g=`00:${s}`),o(g)}))})},onStop(){B.unpatchAll()},getSettingsPanel({settings:o}){return n.createElement(J,{settings:o})}};M(q);
