function A(t){window.enmity.plugins.registerPlugin(t)}function P(t){return window.enmity.patcher.create(t)}const l=window.enmity.modules.common.Constants;window.enmity.modules.common.Clipboard,window.enmity.modules.common.Assets;const $=window.enmity.modules.common.Messages;window.enmity.modules.common.Clyde,window.enmity.modules.common.Avatars,window.enmity.modules.common.Native;const n=window.enmity.modules.common.React;window.enmity.modules.common.Dispatcher,window.enmity.modules.common.Storage,window.enmity.modules.common.Toasts;const T=window.enmity.modules.common.Dialog;window.enmity.modules.common.Token,window.enmity.modules.common.REST,window.enmity.modules.common.Settings,window.enmity.modules.common.Users;const M=window.enmity.modules.common.Navigation;window.enmity.modules.common.NavigationNative,window.enmity.modules.common.NavigationStack,window.enmity.modules.common.Theme,window.enmity.modules.common.Linking;const k=window.enmity.modules.common.StyleSheet;window.enmity.modules.common.ColorMap,window.enmity.modules.common.Components,window.enmity.modules.common.Locale,window.enmity.modules.common.Profiles,window.enmity.modules.common.Lodash,window.enmity.modules.common.Logger,window.enmity.modules.common.Flux,window.enmity.modules.common.SVG,window.enmity.modules.common.Scenes,window.enmity.modules.common.Moment;function E(t,o,m){window.enmity.settings.set(t,o,m)}function F(t,o,m){return window.enmity.settings.get(t,o,m)}const{components:e}=window.enmity;e.Alert,e.Button,e.FlatList,e.Image,e.ImageBackground,e.KeyboardAvoidingView,e.Modal,e.Pressable,e.RefreshControl;const B=e.ScrollView;e.SectionList,e.StatusBar,e.StyleSheet,e.Switch;const d=e.Text;e.TextInput,e.TouchableHighlight,e.TouchableOpacity,e.TouchableWithoutFeedback,e.Touchable;const g=e.View;e.VirtualizedList,e.Form,e.FormArrow,e.FormCTA,e.FormCTAButton,e.FormCardSection,e.FormCheckbox,e.FormDivider,e.FormHint,e.FormIcon,e.FormInput,e.FormLabel,e.FormRadio;const u=e.FormRow,b=e.FormSection;e.FormSelect,e.FormSubLabel;const I=e.FormSwitch;e.FormTernaryCheckBox,e.FormText,e.FormTextColors,e.FormTextSizes;var c="ReplaceTimestamps",h="1.1.2",N="Replaces plaintext 24 hour timestamps into Discord's timestamps",C=[{name:"HypedDomi",id:"354191516979429376"}],V="#E54B4B",v="https://raw.githubusercontent.com/HypedDomi/Enmity-Stuff/main/dist/ReplaceTimestamps.js",x="https://github.com/HypedDomi/Enmity-Stuff/tree/main/ReplaceTimestamps",S={name:c,version:h,description:N,authors:C,color:V,rawUrl:v,sourceUrl:x};function Y(...t){return window.enmity.modules.getByProps(...t)}window.enmity.modules.common;const{native:w}=window.enmity;function H(){w.reload()}w.version,w.build,w.device,w.version;async function D(){let t=(await(await fetch(`${v}?${Math.random()}`)).text()).match(/[0-9].[0-9].[0-9]/g);if(!(t!=null&&t.length))return!1;t=t[0].replace('"',""),t=t.split(".").map(m=>parseInt(m));const o=h.split(".").map(m=>parseInt(m));return t[0]>o[0]||t[0]==o[0]&&t[1]>o[1]?!0:t[0]==o[0]&&t[1]==o[1]&&t[2]>o[2]}const O=t=>{window.enmity.plugins.installPlugin(t),T.show({title:"Plugin Updater",body:"Updated to the latest version. Would you like to reload Discord now?",confirmText:"Reload",cancelText:"Later",onConfirm:()=>H()})};function L(){T.show({title:"Plugin Updater",body:`**${c}** has an update. Do you want to update now?`,confirmText:"Update",cancelText:"No",onConfirm:()=>{E(c,"update",!0),O(`${v}?${Math.random()}`)}})}const U=Y("transitionToGuild");var z=({settings:t})=>{const o=k.createThemedStyleSheet({item:{color:l.ThemeColorMap.TEXT_MUTED},text_container:{paddingLeft:15,paddingTop:5,flexDirection:"column",flexWrap:"wrap"},main_text:{opacity:.975,letterSpacing:.25},header:{color:l.ThemeColorMap.HEADER_PRIMARY,fontFamily:l.Fonts.DISPLAY_BOLD,fontSize:25,letterSpacing:.25},sub_header:{color:l.ThemeColorMap.HEADER_SECONDARY,opacity:.975,fontSize:12.75}}),[m,s]=n.useState(),[p,f]=n.useState();return n.createElement(n.Fragment,null,n.createElement(B,{onTouchStart:i=>{s(i.nativeEvent.pageX),f(i.nativeEvent.pageY)},onTouchEnd:i=>{m-i.nativeEvent.pageX<-100&&p-i.nativeEvent.pageY<40&&p-i.nativeEvent.pageY>-40&&M.pop()}},n.createElement(g,null,n.createElement(g,{style:o.text_container},n.createElement(d,{style:[o.main_text,o.header]},c),n.createElement(g,{style:{flexDirection:"row"}},n.createElement(d,{style:[o.main_text,o.sub_header]},"Author:"),n.createElement(d,{style:[o.main_text,o.sub_header,{paddingLeft:4,fontFamily:l.Fonts.DISPLAY_BOLD}]},` ${C.map(i=>i.name).join(", ")}`)),n.createElement(g,{style:{flexDirection:"row"}},n.createElement(d,{style:[o.main_text,o.sub_header]},"Version:"),n.createElement(d,{style:[o.main_text,o.sub_header,{paddingLeft:4,fontFamily:l.Fonts.DISPLAY_BOLD}]},` ${h}`)))),n.createElement(b,{title:"Updates"},n.createElement(u,{label:"Check for Updates on startup",subLabel:"Checks automatically for updates when starting the Plugin",trailing:n.createElement(I,{value:t.getBoolean("autoUpdateCheck",!0),onValueChange:()=>t.toggle("autoUpdateCheck",!0)})}),n.createElement(u,{label:"Check for Updates",trailing:u.Arrow,onPress:()=>{D().then(i=>{i?L():T.show({title:"Plugin Updater",body:`**${c}** is already on the latest version (**${h}**)`,confirmText:"OK"})})}})),n.createElement(b,{title:"Source"},n.createElement(u,{label:"Source",subLabel:`See the Source Code for ${c}`,trailing:u.Arrow,onPress:()=>U==null?void 0:U.openURL(x)}))))};const R=P("ReplaceTimestamps"),W={...S,onStart(){!F(S.name,"update",!1)&&F(S.name,"autoUpdateCheck",!0)&&D().then(o=>{o&&L()}),E(S.name,"update",!1);const t=o=>{const m=new Date().toISOString().replace(/T/," ").replace(/\..+/,"").replace(/\d?\d:\d\d/,o),s=Math.round(new Date(m).getTime()/1e3);return isNaN(s)?o:`<t:${s}:t>`};R.before($,"sendMessage",(o,[,m])=>{const s=/(?<!\d)\d{1,2}:\d{2}(?!\d)(am|pm)?/gi,p=/((?<!\d)\d{1,2}:\d{2}(?!\d))(am|pm)?/i;m.content.search(s)!==-1&&(m.content=m.content.replace(s,f=>{let[,i,y]=f.match(p),[r,a]=i.split(":").map(_=>parseInt(_));return y&&y.toLowerCase()==="pm"&&r<12&&r!==0?(r+=12,a=a.toString().padStart(2,"0"),i=`${r}:${a}`):y&&y.toLowerCase()==="am"&&r===12||r===24?i=`00:${a}`:a>=60&&(r+=Math.floor(a/60),a=a%60,i=`${r}:${a}`),t(i)}))})},onStop(){R.unpatchAll()},getSettingsPanel({settings:t}){return n.createElement(z,{settings:t})}};A(W);
